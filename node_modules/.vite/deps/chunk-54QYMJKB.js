import {
  __commonJS,
  __toESM
} from "./chunk-VXSGCTFZ.js";

// node_modules/ws/browser.js
var require_browser = __commonJS({
  "node_modules/ws/browser.js"(exports, module) {
    "use strict";
    module.exports = function() {
      throw new Error(
        "ws does not work in the browser. Browser clients must use the native WebSocket object"
      );
    };
  }
});

// node_modules/puppeteer-core/lib/esm/puppeteer/common/NodeWebSocketTransport.js
var import_ws = __toESM(require_browser(), 1);

// node_modules/puppeteer-core/lib/esm/puppeteer/generated/version.js
var packageVersion = "20.7.3";

// node_modules/puppeteer-core/lib/esm/puppeteer/common/NodeWebSocketTransport.js
var __classPrivateFieldSet = function(receiver, state, value, kind, f) {
  if (kind === "m")
    throw new TypeError("Private method is not writable");
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = function(receiver, state, kind, f) {
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _NodeWebSocketTransport_ws;
var NodeWebSocketTransport = class {
  static create(url, headers) {
    return new Promise((resolve, reject) => {
      const ws = new import_ws.default(url, [], {
        followRedirects: true,
        perMessageDeflate: false,
        maxPayload: 256 * 1024 * 1024,
        headers: {
          "User-Agent": `Puppeteer ${packageVersion}`,
          ...headers
        }
      });
      ws.addEventListener("open", () => {
        return resolve(new NodeWebSocketTransport(ws));
      });
      ws.addEventListener("error", reject);
    });
  }
  constructor(ws) {
    _NodeWebSocketTransport_ws.set(this, void 0);
    __classPrivateFieldSet(this, _NodeWebSocketTransport_ws, ws, "f");
    __classPrivateFieldGet(this, _NodeWebSocketTransport_ws, "f").addEventListener("message", (event) => {
      if (this.onmessage) {
        this.onmessage.call(null, event.data);
      }
    });
    __classPrivateFieldGet(this, _NodeWebSocketTransport_ws, "f").addEventListener("close", () => {
      if (this.onclose) {
        this.onclose.call(null);
      }
    });
    __classPrivateFieldGet(this, _NodeWebSocketTransport_ws, "f").addEventListener("error", () => {
    });
  }
  send(message) {
    __classPrivateFieldGet(this, _NodeWebSocketTransport_ws, "f").send(message);
  }
  close() {
    __classPrivateFieldGet(this, _NodeWebSocketTransport_ws, "f").close();
  }
};
_NodeWebSocketTransport_ws = /* @__PURE__ */ new WeakMap();

export {
  NodeWebSocketTransport
};
//# sourceMappingURL=chunk-54QYMJKB.js.map
